# OSKernel2025 内核当前未解决问题追踪

本文档记录了当前 OSKernel2025 操作系统内核开发过程中尚未解决的关键技术问题，旨在为后续定位与修复提供精准、专业的参考。

---

## 1. 管道文件描述符关闭与进程锁重复获取问题

**问题描述：**  
在实现 pipe 管道通信机制时，发现当一端关闭后唤醒另一端时，会出现重复获取进程锁的现象。经过排查，初步认为原因在于进程退出时，应该主动关闭其持有的所有文件描述符，而不是等到父进程通过 wait 回收子进程资源时再统一关闭。当前具体原因尚未完全定位，需进一步分析进程资源回收与文件描述符管理的时序及锁机制。

---

## 2. virtio-blk 虚拟块设备中断无法触发问题

**问题描述：**  
virtio-blk 虚拟块设备驱动开发过程中，发现设备中断始终无法正常产生。为保证功能，临时采用轮询方式检测设备状态，但轮询时检测位不准确，可能导致磁盘数据尚未准备好就返回，进而无法正确读取文件系统结构。后续通过检测 virtio 中断设置位，部分缓解了问题，但根本原因仍需进一步定位。

---